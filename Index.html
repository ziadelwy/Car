<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø³Ø§Ø¨ ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>

<style>
:root{
    --bg:#0f172a;
    --card:#111827;
    --accent:#22c55e;
    --accent2:#38bdf8;
    --text:#e5e7eb;
    --muted:#9ca3af;
}

body{
    margin:0;
    font-family:system-ui,Segoe UI,Tahoma;
    background:linear-gradient(180deg,#020617,#0f172a);
    color:var(--text);
}

.container{
    max-width:900px;
    margin:auto;
    padding:15px;
}

.card{
    background:var(--card);
    padding:15px;
    border-radius:14px;
    box-shadow:0 0 20px rgba(0,0,0,.4);
    margin-bottom:15px;
}

h1{
    text-align:center;
    color:var(--accent);
}

input{
    width:100%;
    padding:8px;
    border-radius:8px;
    border:1px solid #1f2937;
    background:#020617;
    color:white;
}

table{
    width:100%;
    border-collapse:collapse;
}

th,td{
    padding:8px;
    text-align:center;
}

th{
    color:var(--accent2);
}

tr:nth-child(even){
    background:#020617;
}

button{
    background:var(--accent);
    border:none;
    padding:8px 12px;
    border-radius:8px;
    color:black;
    font-weight:bold;
    cursor:pointer;
}

.summary{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
}

.box{
    background:#020617;
    padding:10px;
    border-radius:10px;
}

.value{
    font-size:20px;
    color:var(--accent);
    font-weight:bold;
}
</style>
</head>
<body>

<div class="container">

<div class="card">

<h1>ğŸš Ø­Ø³Ø§Ø¨ ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h1>

<label>ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©:</label>
<input type="number" id="totalCost">

</div>

<div class="card">

<table>
<thead>
<tr>
<th>Ø§Ù„Ø§Ø³Ù…</th>
<th>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…</th>
<th>Ø§Ù„ØªÙƒÙ„ÙØ©</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<br>

<button onclick="addRow()">â• Ø¥Ø¶Ø§ÙØ© Ø´Ø®Øµ</button>
<button onclick="clearAll()">ğŸ—‘ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>

</div>

<div class="card summary">

<div class="box">
Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙŠØ§Ù…
<div class="value" id="totalDays">0</div>
</div>

<div class="box">
Ø³Ø¹Ø± Ø§Ù„ÙŠÙˆÙ…
<div class="value" id="dayPrice">0</div>
</div>

<div class="box">
Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„
<div class="value" id="collected">0</div>
</div>

<div class="box">
Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
<div class="value" id="remaining">0</div>
</div>

</div>

</div>

<script>

const tbody=document.getElementById("tbody");

function save(){

let rows=[...tbody.children].map(r=>({

name:r.children[0].children[0].value,

days:r.children[1].children[0].value

}));

let data={

cost:document.getElementById("totalCost").value,

rows

};

localStorage.setItem("transportData",JSON.stringify(data));

}

function load(){

let data=localStorage.getItem("transportData");

if(!data){

document.getElementById("totalCost").value=4200;

for(let i=0;i<5;i++) addRow();

return;

}

data=JSON.parse(data);

document.getElementById("totalCost").value=data.cost||4200;

data.rows.forEach(r=>addRow(r.name,r.days));

calc();

}

function addRow(name="",days=""){

let tr=document.createElement("tr");

tr.innerHTML=`

<td><input value="${name}" oninput="calc()"></td>

<td><input type="number" min="0" value="${days}" oninput="calc()"></td>

<td class="cost"></td>

<td><button onclick="removeRow(this)">âœ–</button></td>

`;

tbody.appendChild(tr);

calc();

}

function removeRow(btn){

btn.closest("tr").remove();

calc();

}

function clearAll(){

if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){

localStorage.removeItem("transportData");

tbody.innerHTML="";

load();

}

}

function calc(){

let totalCost=parseFloat(

document.getElementById("totalCost").value

)||0;

let totalDays=0;

let rows=[...tbody.children];

rows.forEach(r=>{

let days=parseFloat(

r.children[1].children[0].value

)||0;

totalDays+=days;

});

let dayPrice=totalDays?totalCost/totalDays:0;

let collected=0;

rows.forEach(r=>{

let days=parseFloat(

r.children[1].children[0].value

)||0;

let cost=days*dayPrice;

r.querySelector(".cost").innerText=

cost?cost.toFixed(2)+" Ø¬":"";

collected+=cost;

});

document.getElementById("totalDays").innerText=totalDays;

document.getElementById("dayPrice").innerText=dayPrice.toFixed(2)+" Ø¬";

document.getElementById("collected").innerText=collected.toFixed(2)+" Ø¬";

document.getElementById("remaining").innerText=

(totalCost-collected).toFixed(2)+" Ø¬";

save();

}

document.getElementById("totalCost").oninput=calc;

load();

</script>

</body>
  </html>
